# –†–µ—á–µ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ Marmara project

## 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
marmara_project/
‚îú‚îÄ‚îÄ app/                      # –û—Å–Ω–æ–≤–Ω–æ–π backend –∫–æ–¥ FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ main.py               # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ config.py             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ logger.py             # –õ–æ–≥–≥–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ database.py           # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ PostgreSQL
‚îÇ   ‚îú‚îÄ‚îÄ api/                  # API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ endpoints.py      # –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã: –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤, –ø–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.py           # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ core/                 # –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ security.py       # JWT, –ø–∞—Ä–æ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ dependencies/         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ FastAPI
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth.py
‚îÇ   ‚îú‚îÄ‚îÄ models/               # –°—Ö–µ–º—ã –∏ –º–æ–¥–µ–ª–∏ –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db_models.py      # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schemas.py        # Pydantic-—Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ services/             # –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ audio_service.py              # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ –∞—É–¥–∏–æ (pydub, librosa)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ speech_service.py             # –†–∞–±–æ—Ç–∞ —Å Whisper
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ whisper_model.py              # –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Whisper –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ text_service.py               # –ú–æ—Ä—Ñ–æ–ª–æ–≥–∏—è –∏ –æ—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ (spaCy, nltk, pymorphy2)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ transcription_parser.py       # –ü–∞—Ä—Å–∏–Ω–≥ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ metrics_service.py            # –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ text_metrics.service.py       # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ tasks/                # Celery –∑–∞–¥–∞—á–∏
‚îÇ       ‚îú‚îÄ‚îÄ celery_app.py     # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Celery
‚îÇ       ‚îú‚îÄ‚îÄ transcribe.py     # –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∏ –∞–Ω–∞–ª–∏–∑
‚îÇ       ‚îî‚îÄ‚îÄ audio.task.py     # –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ celery_worker.py          # –ó–∞–ø—É—Å–∫ Celery –≤–æ—Ä–∫–µ—Ä–∞
‚îú‚îÄ‚îÄ requirements.txt          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ Dockerfile                # Docker –æ–±—Ä–∞–∑ backend
‚îú‚îÄ‚îÄ docker-compose.yml        # docker-compose –¥–ª—è —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ docker_cache/             # –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–µ–Ω–Ω–∞—è Whisper –º–æ–¥–µ–ª—å
‚îÇ   ‚îî‚îÄ‚îÄ whisper/large-v2.pt   # –ú–æ–¥–µ–ª—å whisper large-v2
‚îú‚îÄ‚îÄ marmara_frontend/         # Next.js + Tailwind frontend
‚îú‚îÄ‚îÄ uploaded_files/           # –ü–∞–ø–∫–∞ –¥–ª—è –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Ñ–∞–π–ª–æ–≤
‚îî‚îÄ‚îÄ README.md                 # –≠—Ç–æ—Ç —Ñ–∞–π–ª

```

## 2. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –®–∞–≥ 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/yourname/marmara_project.git
cd marmara_project
```

### –®–∞–≥ 2. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env`

```env
POSTGRES_DB=marmara_db
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_HOST=db
POSTGRES_PORT=5432
REDIS_URL=redis://redis:6379/0
```

### –®–∞–≥ 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Docker Compose

```bash
docker-compose up --build
```
### üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
#### üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å Docker
####  –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
```bash
docker-compose up --build
```
#### üì¶ –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ñ–∞–π–ª –º–æ–¥–µ–ª–∏ large-v2.pt –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ docker_cache/whisper/large-v2.pt

#### –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω ‚Äî —Å–∫–∞—á–∞–π –≤—Ä—É—á–Ω—É—é:
```bash
mkdir -p docker_cache/whisper
python -c "import whisper; whisper.load_model('large-v2')"
cp ~/.cache/whisper/large-v2.pt docker_cache/whisper/ #–µ—Å–ª–∏ –Ω–∞ windows, —Ç–æ  –ø—É—Ç—å –∏–∑ –ø–∞–ø–∫–∏ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost](http://localhost)

#### –ó–∞–ø—É—Å–∫ Celery –≤—Ä—É—á–Ω—É—é (–µ—Å–ª–∏ –±–µ–∑ Docker)
```
celery -A celery_worker.celery worker --loglevel=info
```
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Redis —É–∂–µ –∑–∞–ø—É—â–µ–Ω –Ω–∞ localhost:6379

### –®–∞–≥ 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

#### –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞

```http
POST /upload
Content-Type: multipart/form-data
```

–ü—Ä–∏–º–µ—Ä —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `curl`:

```bash
curl -X POST "http://localhost:8000/upload" -F "file=@example.wav"
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–æ–∫

```http
GET /transcriptions
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–¥–Ω–æ–π —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –ø–æ ID

```http
GET /transcriptions/{id}
```

## 3. –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

* **Whisper** ‚Äî —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏
* **Pydub/Librosa** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ (–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
* **spaCy, nltk, pymorphy2** ‚Äî –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞ (–ª–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏—è, –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—è)
* **FastAPI** ‚Äî REST API
* **Celery** ‚Äî —Ñ–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á
* **PostgreSQL** ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
* **Redis** ‚Äî –±—Ä–æ–∫–µ—Ä –∑–∞–¥–∞—á –¥–ª—è Celery

## 4. –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

* Whisper —Ç—Ä–µ–±—É–µ—Ç GPU –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –∏ CPU).
* –ê—É–¥–∏–æ—Ñ–∞–π–ª—ã –≤—Ä–µ–º–µ–Ω–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `/tmp/audio`, –º–æ–≥—É—Ç –±—ã—Ç—å –æ—á–∏—â–µ–Ω—ã –≤—Ä—É—á–Ω—É—é.
* !!! –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å psycopg2-binary==2.9.10
## 5. –ü–ª–∞–Ω—ã

* –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ–∫—Å—Ç–∞ (—á–∞—Å—Ç–æ—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑, –≥—Ä–∞—Ñ—ã)
* –°–¥–µ–ª–∞—Ç—å —Å–≤–æ–¥–∫—É –ø–æ –≤—Å–µ–º –∑–∞–ø–∏—Å—è–º
* –°–¥–µ–ª–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º
* –°–¥–µ–ª–∞—Ç—å –º–∏–Ω–∏ –∞–∫–∫–∞—É–Ω—Ç—ã - –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–º –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã ,—Ç–æ–ª—å–∫–æ –∏—Ö –∑–∞–ø–∏—Å–∏
* –°–¥–µ–ª–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç—ã –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤